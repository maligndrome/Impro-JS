function populate_canvas(t){var e,a=e=1;null!=t.getAttribute("data-scale")&&""!=t.getAttribute("data-scale")&&(a=e=t.getAttribute("data-scale")/1),null!=t.getAttribute("data-scale-x")&&""!=t.getAttribute("data-scale-x")&&(e=t.getAttribute("data-scale-x")/1),null!=t.getAttribute("data-scale-y")&&""!=t.getAttribute("data-scale-y")&&(a=t.getAttribute("data-scale-y")/1);var g=t.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.src=t.getAttribute("data-src");var i=t.getAttribute("data-type");r.onload=function(){t.width=r.width=r.width*e,t.height=r.height=r.height*a,g.drawImage(r,0,0,t.width,t.height),pix=process(t,i)}}function process(t,e){var a=t.getContext("2d"),i=a.getImageData(0,0,t.width,t.height),n=i.data;if("sepia"==e)for(var l=0,s=n.length;s>l;l+=4)r=n[l],g=n[l+1],b=n[l+2],n[l]=.393*r+.769*g+.189*b,n[l+1]=.349*r+.686*g+.168*b,n[l+2]=.272*r+.534*g+.131*b;else if("grey"==e)for(var l=0,s=n.length;s>l;l+=4)r=n[l],g=n[l+1],b=n[l+2],n[l]=(r+g+b)/3,n[l+1]=(r+g+b)/3,n[l+2]=(r+g+b)/3;a.putImageData(i,0,0)}window.onload=function(){for(a=document.getElementsByClassName("impro"),b=0;b<a.length;b++)populate_canvas(a[b])};
